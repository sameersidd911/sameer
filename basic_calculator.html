<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Basic Calculator</title>
  <style>
    :root{
      --bg:#0f172a; /* slate-900 */
      --card:#0b1220;
      --accent:#60a5fa; /* blue-400 */
      --muted:#94a3b8;
      --btn:#111827;
      --btn-hover:#1f2937;
    }
    *{box-sizing:border-box}
    body{margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,#071021 0%, #071428 100%);font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;color:#e6eef8}
    .card{width:360px;background:linear-gradient(180deg,var(--card), #071226);border-radius:16px;padding:20px;box-shadow:0 8px 30px rgba(2,6,23,0.7)}
    .title{font-weight:600;margin:0 0 12px 0;font-size:18px;color:var(--muted);text-align:center}

    .display{
      background:linear-gradient(180deg,#021023, #031328);
      border-radius:12px;padding:18px;min-height:72px;display:flex;flex-direction:column;justify-content:center;align-items:flex-end;color:#e6eef8;margin-bottom:14px;
      box-shadow:inset 0 -4px 12px rgba(2,6,23,0.6);
      font-variant-numeric: tabular-nums;
    }
    .expression{font-size:14px;color:var(--muted);opacity:0.9;}
    .result{font-size:28px;font-weight:600;}

    .keys{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
    button{appearance:none;border:0;border-radius:10px;padding:14px 10px;font-size:18px;background:var(--btn);color:inherit;cursor:pointer;box-shadow:0 2px 6px rgba(2,6,23,0.6)}
    button:hover{background:var(--btn-hover)}
    .op{background:linear-gradient(180deg,#0b1726,#092233);color:var(--accent)}
    .wide{grid-column:span 2}
    .accent{background:linear-gradient(180deg,#154a86,#0b3b6a);color:white}
    .danger{background:linear-gradient(180deg,#5b2121,#3b1414);color:#ffdede}

    .kbd-hint{font-size:12px;color:var(--muted);text-align:center;margin-top:12px}

    @media (max-width:420px){.card{width:92vw}}
  </style>
</head>
<body>
  <main class="card" role="application" aria-label="Basic calculator">
    <h1 class="title">Basic Calculator</h1>

    <section class="display" id="display" aria-live="polite">
      <div class="expression" id="expr">0</div>
      <div class="result" id="result">0</div>
    </section>

    <div class="keys">
      <button class="danger" id="clear">C</button>
      <button id="back">⌫</button>
      <button id="percent">%</button>
      <button class="op" data-op="/">÷</button>

      <button data-num="7">7</button>
      <button data-num="8">8</button>
      <button data-num="9">9</button>
      <button class="op" data-op="*">×</button>

      <button data-num="4">4</button>
      <button data-num="5">5</button>
      <button data-num="6">6</button>
      <button class="op" data-op="-">−</button>

      <button data-num="1">1</button>
      <button data-num="2">2</button>
      <button data-num="3">3</button>
      <button class="op" data-op="+">+</button>

      <button data-num="0" class="wide">0</button>
      <button id="dot">.</button>
      <button class="accent" id="equals">=</button>
    </div>

    <div class="kbd-hint">You can also use your keyboard (numbers, + - * / Enter, Backspace)</div>
  </main>

  <script>
    (function(){
      const exprEl = document.getElementById('expr');
      const resultEl = document.getElementById('result');
      const buttons = document.querySelectorAll('button');

      let expression = '';

      function updateDisplay(){
        exprEl.textContent = expression || '0';
        try{
          const safe = toEvalString(expression);
          if(safe.trim() === ''){ resultEl.textContent = '0'; return }
          const val = eval(safe);
          resultEl.textContent = Number.isFinite(val) ? roundResult(val) : 'Error';
        }catch(e){ resultEl.textContent = 'Error' }
      }

      function roundResult(v){
        // avoid weird long floats
        return Math.abs(v) < 1e12 ? (+v.toFixed(10)).toString() : v.toString();
      }

      function toEvalString(s){
        // convert visual to JS: ×, ÷, − → *, /, -
        // convert percent sign by replacing 'number%' with '(number*0.01)'
        let t = s.replace(/×/g,'*').replace(/÷/g,'/').replace(/−/g,'-');
        // handle percent: replace occurrences like 50% or (expr)%
        t = t.replace(/(\d+(?:\.\d+)?|\))%/g, '($1*0.01)');
        return t;
      }

      function append(s){
        // prevent multiple operators in a row (except minus as unary)
        const last = expression.slice(-1);
        if(/[+\-*/×÷−]/.test(s)){
          if(expression === '' && s === '-') { expression = '-'; return }
          if(/[+\-*/×÷−]/.test(last)){
            // replace operator
            expression = expression.slice(0,-1) + s; return
          }
        }
        expression += s;
      }

      function clearAll(){ expression = ''; updateDisplay() }
      function backspace(){ expression = expression.slice(0,-1); updateDisplay() }
      function compute(){
        try{
          const safe = toEvalString(expression);
          const val = eval(safe);
          if(!Number.isFinite(val)) { resultEl.textContent='Error'; return }
          expression = String(roundResult(val));
          updateDisplay();
        }catch(e){ resultEl.textContent='Error' }
      }

      buttons.forEach(btn=>{
        btn.addEventListener('click', ()=>{
          if(btn.id === 'clear'){ clearAll(); return }
          if(btn.id === 'back'){ backspace(); return }
          if(btn.id === 'percent'){ append('%'); updateDisplay(); return }
          if(btn.id === 'dot'){ append('.'); updateDisplay(); return }
          if(btn.id === 'equals'){ compute(); return }
          if(btn.dataset.num){ append(btn.dataset.num); updateDisplay(); return }
          if(btn.dataset.op){ append(btn.dataset.op); updateDisplay(); return }
        })
      })

      // keyboard support
      window.addEventListener('keydown', (e)=>{
        if(e.key >= '0' && e.key <= '9'){ append(e.key); updateDisplay(); e.preventDefault(); return }
        if(['+','-','*','/'].includes(e.key)){ append(e.key); updateDisplay(); e.preventDefault(); return }
        if(e.key === 'Enter' || e.key === '='){ compute(); e.preventDefault(); return }
        if(e.key === 'Backspace'){ backspace(); e.preventDefault(); return }
        if(e.key === 'Escape'){ clearAll(); e.preventDefault(); return }
        if(e.key === '.') { append('.'); updateDisplay(); e.preventDefault(); return }
        if(e.key === '%'){ append('%'); updateDisplay(); e.preventDefault(); return }
      })

      // init
      updateDisplay();
    })();
  </script>
</body>
</html>
